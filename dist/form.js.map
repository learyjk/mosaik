{
  "version": 3,
  "sources": ["../src/form.ts"],
  "sourcesContent": ["document.addEventListener(\"DOMContentLoaded\", () => {\n  let debug = true;\n  debug && console.log(\"script loaded\");\n  const form = document.querySelector<HTMLFormElement>(\"form\");\n  if (!form) return;\n  const wTabContent = form.querySelector<HTMLDivElement>(\".w-tab-content\");\n  if (!wTabContent) return;\n  const formContentPanes =\n    wTabContent.querySelectorAll<HTMLDivElement>(\"[data-w-tab]\");\n  const tabMenu = form.querySelector<HTMLDivElement>(\".w-tab-menu\");\n  if (!tabMenu) return;\n  const tabLinks = tabMenu.querySelectorAll<HTMLAnchorElement>(\"a\");\n  if (!tabLinks) return;\n  const nextButton = form.querySelector<HTMLAnchorElement>(\n    '[wb-data=\"next-button\"]'\n  );\n  if (!nextButton) return;\n  const backButton = document.querySelector<HTMLAnchorElement>(\n    '[wb-data=\"back-button\"]'\n  );\n  if (!backButton) return;\n  const submitButton = form.querySelector<HTMLInputElement>(\n    '[wb-data=\"submit-button\"]'\n  );\n  if (!submitButton) return;\n  debug && console.log(\"selectors finished\");\n\n  // set current step to start form\n  let currentStep = 0;\n  let numberOfSteps = formContentPanes.length;\n\n  console.log({ numberOfSteps });\n\n  // inputs\n  const formFields = document.querySelectorAll<HTMLInputElement>(\"input\");\n\n  const validateEmail = (value) => {\n    const emailValidation = /^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,})+$/;\n    if (value.match(emailValidation)) {\n      return true;\n    }\n    return false;\n  };\n\n  const checkInputValidity = (type: string, value) => {\n    if (type === \"text\") {\n      if (value.length > 0) {\n        return true;\n      } else {\n        return false;\n      }\n    } else if (type === \"email\") {\n      return validateEmail(value);\n    }\n  };\n\n  const updateUI = (isValid) => {\n    // last step\n    if (currentStep === numberOfSteps - 1) {\n      nextButton.classList.add(\"hide\");\n    } else {\n      nextButton.classList.remove(\"hide\");\n    }\n\n    // first step\n    if (currentStep === 0) {\n      backButton.classList.add(\"hide\");\n    } else {\n      backButton.classList.remove(\"hide\");\n    }\n\n    // update next button\n    if (isValid) {\n      nextButton.classList.remove(\"disabled\");\n    } else {\n      nextButton.classList.add(\"disabled\");\n    }\n  };\n\n  const handleFormChange = (e) => {\n    console.log(e.target.value);\n    console.log(e.target);\n    let type = e.target.type;\n    let value = e.target.value;\n    let isValid = checkInputValidity(type, value);\n    updateUI(isValid);\n  };\n\n  const handleNextButtonClicked = (e) => {\n    currentStep++;\n    let oncomingForm = formContentPanes[currentStep].querySelector(\"input\");\n    if (!oncomingForm) return;\n    let type = oncomingForm.type;\n    let value = oncomingForm.value;\n    let isValid = checkInputValidity(type, value);\n\n    updateUI(isValid);\n    tabLinks[currentStep].click();\n  };\n\n  const handleBackButtonClicked = (e) => {\n    currentStep--;\n    let oncomingForm = formContentPanes[currentStep].querySelector(\"input\");\n    if (!oncomingForm) return;\n    let type = oncomingForm.type;\n    let value = oncomingForm.value;\n    let isValid = checkInputValidity(type, value);\n    updateUI(isValid);\n    tabLinks[currentStep].click();\n  };\n\n  Webflow.push(function () {\n    $(\"form\").submit(function () {\n      console.log(`submit attempt current step: ${currentStep}`);\n      if (currentStep === numberOfSteps - 1) {\n        console.log(\"submitting form\");\n        backButton.classList.add(\"hide\");\n        return true;\n      } else {\n        return false;\n      }\n    });\n  });\n\n  formFields.forEach((formField) => {\n    formField.addEventListener(\"input\", handleFormChange);\n  });\n\n  nextButton?.addEventListener(\"click\", handleNextButtonClicked);\n  backButton?.addEventListener(\"click\", handleBackButtonClicked);\n\n  document.addEventListener(\"keypress\", function (e) {\n    if (currentStep === numberOfSteps - 1) return;\n    if (e.key === \"Enter\") {\n      if (nextButton.classList.contains(\"disabled\")) return;\n      setTimeout(() => {\n        nextButton.click();\n      }, 500);\n    }\n  });\n});\n"],
  "mappings": ";;AAAA,WAAS,iBAAiB,oBAAoB,MAAM;AAClD,QAAI,QAAQ;AACZ,aAAS,QAAQ,IAAI,eAAe;AACpC,UAAM,OAAO,SAAS,cAA+B,MAAM;AAC3D,QAAI,CAAC;AAAM;AACX,UAAM,cAAc,KAAK,cAA8B,gBAAgB;AACvE,QAAI,CAAC;AAAa;AAClB,UAAM,mBACJ,YAAY,iBAAiC,cAAc;AAC7D,UAAM,UAAU,KAAK,cAA8B,aAAa;AAChE,QAAI,CAAC;AAAS;AACd,UAAM,WAAW,QAAQ,iBAAoC,GAAG;AAChE,QAAI,CAAC;AAAU;AACf,UAAM,aAAa,KAAK;AAAA,MACtB;AAAA,IACF;AACA,QAAI,CAAC;AAAY;AACjB,UAAM,aAAa,SAAS;AAAA,MAC1B;AAAA,IACF;AACA,QAAI,CAAC;AAAY;AACjB,UAAM,eAAe,KAAK;AAAA,MACxB;AAAA,IACF;AACA,QAAI,CAAC;AAAc;AACnB,aAAS,QAAQ,IAAI,oBAAoB;AAGzC,QAAI,cAAc;AAClB,QAAI,gBAAgB,iBAAiB;AAErC,YAAQ,IAAI,EAAE,cAAc,CAAC;AAG7B,UAAM,aAAa,SAAS,iBAAmC,OAAO;AAEtE,UAAM,gBAAgB,CAAC,UAAU;AAC/B,YAAM,kBAAkB;AACxB,UAAI,MAAM,MAAM,eAAe,GAAG;AAChC,eAAO;AAAA,MACT;AACA,aAAO;AAAA,IACT;AAEA,UAAM,qBAAqB,CAAC,MAAc,UAAU;AAClD,UAAI,SAAS,QAAQ;AACnB,YAAI,MAAM,SAAS,GAAG;AACpB,iBAAO;AAAA,QACT,OAAO;AACL,iBAAO;AAAA,QACT;AAAA,MACF,WAAW,SAAS,SAAS;AAC3B,eAAO,cAAc,KAAK;AAAA,MAC5B;AAAA,IACF;AAEA,UAAM,WAAW,CAAC,YAAY;AAE5B,UAAI,gBAAgB,gBAAgB,GAAG;AACrC,mBAAW,UAAU,IAAI,MAAM;AAAA,MACjC,OAAO;AACL,mBAAW,UAAU,OAAO,MAAM;AAAA,MACpC;AAGA,UAAI,gBAAgB,GAAG;AACrB,mBAAW,UAAU,IAAI,MAAM;AAAA,MACjC,OAAO;AACL,mBAAW,UAAU,OAAO,MAAM;AAAA,MACpC;AAGA,UAAI,SAAS;AACX,mBAAW,UAAU,OAAO,UAAU;AAAA,MACxC,OAAO;AACL,mBAAW,UAAU,IAAI,UAAU;AAAA,MACrC;AAAA,IACF;AAEA,UAAM,mBAAmB,CAAC,MAAM;AAC9B,cAAQ,IAAI,EAAE,OAAO,KAAK;AAC1B,cAAQ,IAAI,EAAE,MAAM;AACpB,UAAI,OAAO,EAAE,OAAO;AACpB,UAAI,QAAQ,EAAE,OAAO;AACrB,UAAI,UAAU,mBAAmB,MAAM,KAAK;AAC5C,eAAS,OAAO;AAAA,IAClB;AAEA,UAAM,0BAA0B,CAAC,MAAM;AACrC;AACA,UAAI,eAAe,iBAAiB,aAAa,cAAc,OAAO;AACtE,UAAI,CAAC;AAAc;AACnB,UAAI,OAAO,aAAa;AACxB,UAAI,QAAQ,aAAa;AACzB,UAAI,UAAU,mBAAmB,MAAM,KAAK;AAE5C,eAAS,OAAO;AAChB,eAAS,aAAa,MAAM;AAAA,IAC9B;AAEA,UAAM,0BAA0B,CAAC,MAAM;AACrC;AACA,UAAI,eAAe,iBAAiB,aAAa,cAAc,OAAO;AACtE,UAAI,CAAC;AAAc;AACnB,UAAI,OAAO,aAAa;AACxB,UAAI,QAAQ,aAAa;AACzB,UAAI,UAAU,mBAAmB,MAAM,KAAK;AAC5C,eAAS,OAAO;AAChB,eAAS,aAAa,MAAM;AAAA,IAC9B;AAEA,YAAQ,KAAK,WAAY;AACvB,QAAE,MAAM,EAAE,OAAO,WAAY;AAC3B,gBAAQ,IAAI,gCAAgC,aAAa;AACzD,YAAI,gBAAgB,gBAAgB,GAAG;AACrC,kBAAQ,IAAI,iBAAiB;AAC7B,qBAAW,UAAU,IAAI,MAAM;AAC/B,iBAAO;AAAA,QACT,OAAO;AACL,iBAAO;AAAA,QACT;AAAA,MACF,CAAC;AAAA,IACH,CAAC;AAED,eAAW,QAAQ,CAAC,cAAc;AAChC,gBAAU,iBAAiB,SAAS,gBAAgB;AAAA,IACtD,CAAC;AAED,gBAAY,iBAAiB,SAAS,uBAAuB;AAC7D,gBAAY,iBAAiB,SAAS,uBAAuB;AAE7D,aAAS,iBAAiB,YAAY,SAAU,GAAG;AACjD,UAAI,gBAAgB,gBAAgB;AAAG;AACvC,UAAI,EAAE,QAAQ,SAAS;AACrB,YAAI,WAAW,UAAU,SAAS,UAAU;AAAG;AAC/C,mBAAW,MAAM;AACf,qBAAW,MAAM;AAAA,QACnB,GAAG,GAAG;AAAA,MACR;AAAA,IACF,CAAC;AAAA,EACH,CAAC;",
  "names": []
}
